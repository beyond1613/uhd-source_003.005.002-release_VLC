<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title>UHD - Internal GPSDO Application Notes</title>
<style type="text/css">

body{
font-family:Arial, Helvetica, sans-serif;
font-size:11pt;
color:black;
background-color:white;
width:90%;
margin:0 auto 0 auto;
}

div.document div.contents{
border:1px solid #333333;
padding:10px 30px 10px 10px;
margin-left:50px;
color:inherit;
background-color:#FCFCFC;
display:inline-block;
}

div.document p.topic-title{
font-weight:bold;
}

div.document a:link, div.document a:visited{
color:#236B8E;
background-color:inherit;
text-decoration:none;
}

div.document a:hover{
color:#4985D6;
background-color:inherit;
text-decoration:none;
}

div.document h1.title{
font-size:150%;
border-left:1px solid #333333;
border-bottom:1px solid #333333;
text-align:left;
padding:10px 0px 10px 10px;
margin:10px 5px 20px 5px;
color:#333333;
background-color:inherit;
}

div.document h2.subtitle, div.section h1{
margin-top:50px;
border-bottom:1px solid #333333;
font-size:140%;
text-align:center;
padding:20px 0px 10px 0px;
color:#333333;
background-color:inherit;
}

div.section h2{
font-size:110%;
text-align:left;
padding:15px 0px 5px 0px;
text-decoration:underline;
color:#333333;
background-color:inherit;
}

div.document pre.literal-block{
border:1px inset #333333;
padding:5px;
margin:10px 5px 10px 5px;
color:inherit;
background-color:#FCFCFC;
font-size:90%;
}

div.document table{
padding:5px;
font-size:95%;
}

div.document th{
padding:3px 7px 3px 7px;
border:1px solid #333333;
text-align:center;
color:inherit;
background-color:#ECECEC;
}

div.document tr{
}

div.document td{
padding:3px 7px 3px 7px;
border:1px solid #333333;
text-align:center;
color:inherit;
background-color:#FCFCFC;
}

div.footer{
margin:50px auto 30px auto;
text-align:center;
font-size:85%;
}

</style>
</head>
<body>
<div class="document" id="uhd-internal-gpsdo-application-notes">
<h1 class="title">UHD - Internal GPSDO Application Notes</h1>

<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#specifications" id="id1">Specifications</a></li>
<li><a class="reference internal" href="#installation-instructions" id="id2">Installation Instructions</a><ul>
<li><a class="reference internal" href="#post-installation-task-n-series-only" id="id3">Post-installation Task (N-Series only)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-gpsdo-in-your-application" id="id4">Using the GPSDO in Your Application</a></li>
</ul>
</div>
<p>This application note describes the use of integrated GPS-disciplined
oscillators with Ettus Research USRP devices. It pertains specifically
to the Jackson Labs Firefly-1A device unless noted otherwise.</p>
<div class="section" id="specifications">
<h1>Specifications</h1>
<ul class="simple">
<li><strong>Receiver type</strong>: 50 channel with WAAS, EGNOS, MSAS</li>
<li><strong>10MHz ADEV</strong>: 1e-11 over &gt;24h</li>
<li><strong>1PPS RMS jitter</strong>: &lt;50ns 1-sigma</li>
<li><strong>Holdover</strong>: &lt;11us over 3h</li>
<li><strong>Phase noise</strong>:<ul>
<li><strong>1Hz:</strong> -80dBc/Hz</li>
<li><strong>10Hz:</strong> -110dBc/Hz</li>
<li><strong>100Hz:</strong> -135dBc/Hz</li>
<li><strong>1kHz:</strong> -145dBc/Hz</li>
<li><strong>10kHz:</strong> &lt;-145dBc/Hz</li>
</ul>
</li>
</ul>
<p><strong>Antenna Types:</strong></p>
<p>The GPSDO is capable of supplying a 3V for active GPS antennas or supporting passive antennas.</p>
</div>
<div class="section" id="installation-instructions">
<h1>Installation Instructions</h1>
<p>Installation instructions can be found here:
<a class="reference external" href="http://www.ettus.com/content/files/gpsdo-kit_2.pdf">http://www.ettus.com/content/files/gpsdo-kit_2.pdf</a></p>
<div class="section" id="post-installation-task-n-series-only">
<h2>Post-installation Task (N-Series only)</h2>
<p><strong>Note:</strong> The following instructions are only necessary for UHD 3.4.* and below.</p>
<p>This is necessary if you require absolute GPS time in your application
or need to communicate with the GPSDO to obtain location, satellite info, etc.
If you only require 10MHz and PPS signals for reference or MIMO use
(see the <a class="reference external" href="./sync.html">Synchronization Application Notes</a>),
it is not necessary to perform this step.</p>
<p>To configure the USRP to communicate with the GPSDO, use the
<strong>usrp_burn_mb_eeprom</strong> utility:</p>
<pre class="literal-block">
cd &lt;install-path&gt;/share/uhd/utils
./usrp_burn_mb_eeprom --args=&lt;optional device args&gt; --key=gpsdo --val=internal

-- restore original setting --
./usrp_burn_mb_eeprom --args=&lt;optional device args&gt; --key=gpsdo --val=none
</pre>
</div>
</div>
<div class="section" id="using-the-gpsdo-in-your-application">
<h1>Using the GPSDO in Your Application</h1>
<p>By default, if a GPSDO is detected at startup, the USRP will be configured
to use it as a frequency and time reference. The internal VITA timestamp
will be initialized to the GPS time, and the internal oscillator will be
phase-locked to the 10MHz GPSDO reference. If the GPSDO is not locked to
satellites, the VITA time will not be initialized.</p>
<p>GPS data is obtained through the <strong>mboard_sensors</strong> interface. To retrieve
the current GPS time, use the <strong>gps_time</strong> sensor:</p>
<pre class="literal-block">
usrp-&gt;get_mboard_sensor(&quot;gps_time&quot;);
</pre>
<p>The returned value will be the current epoch time, in seconds since
January 1, 1970. This value is readily converted into human-readable
format using the <strong>time.h</strong> library in C, <strong>boost::posix_time</strong> in C++, etc.</p>
<p>Other information can be fetched as well. You can query the lock status
with the <strong>gps_locked</strong> sensor, as well as obtain raw NMEA sentences using
the <strong>gps_gprmc</strong>, and <strong>gps_gpgga</strong> sensors. Location
information can be parsed out of the <strong>gps_gpgga</strong> sensor by using <strong>gpsd</strong> or
another NMEA parser.</p>
</div>
</div>
<div class="footer">
<hr class="footer" />
Generated on: 2015-05-18 08:53 UTC.

</div>
</body>
</html>
